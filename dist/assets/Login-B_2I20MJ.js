import{b as e,c as t,d as n}from"./formErrors-BvVk0124.js";import{b as r}from"./input-DJ2R0PPV.js";import{b as i}from"./css-Kk413bhP.js";import{ap as a,ay as o,az as s,b2 as c,b8 as l,b9 as u,bC as d,bE as f,bJ as p,bL as m,bS as h,ba as g,bb as _,bc as v,bd as y,be as b,bg as x,bh as S,bi as C,bt as w,bv as T,bx as E,c0 as D,d as O,e as k,g as A}from"./index-BCk1CcfA.js";/* empty css            */const j={class:`min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-white`},M={class:`w-full max-w-md mx-auto bg-white/90 backdrop-blur px-8 py-10 rounded-3xl shadow-2xl border border-slate-100`},N={class:`text-left text-sm`},P={class:`text-sm text-center text-slate-500 mt-6`};var F=C({__name:`Login`,setup(C){let O=a(),{isAuthenticating:F}=c(O),I=s(),L=o(),R=m(),z=[`email`,`password`],B=p({email:``,password:``}),V=p({email:``,password:``}),H=m([]),U=g(()=>L.query.redirect||`/search`),W={email:[{required:!0,message:`Email is required`,trigger:`blur`},{type:`email`,message:`Enter a valid email address`,trigger:`blur`}],password:[{required:!0,message:`Password is required`,trigger:`blur`}]},G=()=>{z.forEach(e=>{V[e]=``}),H.value=[]};z.forEach(e=>{d(()=>B[e],()=>{V[e]&&(V[e]=``),H.value.length&&(H.value=[])})});let K=async()=>{if(R.value)try{G(),await R.value.validate(),await O.login({...B}),k.success(`Welcome back!`),I.replace(U.value)}catch(t){let n=e(t);z.forEach(e=>{V[e]=n.fieldErrors[e]??``}),n.nonFieldErrors.length?H.value=n.nonFieldErrors:Object.values(n.fieldErrors).some(Boolean)||k.error(`Unable to sign in. Please try again.`)}};return(e,a)=>{let o=E(`router-link`);return w(),b(`div`,j,[_(`div`,M,[a[5]||=_(`div`,{class:`text-center mb-10`},[_(`div`,{class:`mx-auto h-12 w-12 rounded-2xl bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold`},` PPR `),_(`h1`,{class:`text-2xl font-semibold text-slate-900 mt-4`},`Sign in to PastPaperRank`),_(`p`,{class:`text-sm text-slate-500 mt-1`},`Access your dashboard and management tools`)],-1),S(h(t),{ref_key:`formRef`,ref:R,model:B,rules:W,"label-position":`top`,onSubmit:l(K,[`prevent`])},{default:f(()=>[H.value.length?(w(),v(h(i),{key:0,class:`mb-4`,type:`error`,closable:!1,"show-icon":``},{default:f(()=>[_(`ul`,N,[(w(!0),b(u,null,T(H.value,e=>(w(),b(`li`,{key:e},D(e),1))),128))])]),_:1})):y(``,!0),S(h(n),{label:`Email`,prop:`email`,error:V.email},{default:f(()=>[S(h(r),{modelValue:B.email,"onUpdate:modelValue":a[0]||=e=>B.email=e,type:`email`,placeholder:`you@example.com`,size:`large`,autocomplete:`email`,disabled:h(F)},null,8,[`modelValue`,`disabled`])]),_:1},8,[`error`]),S(h(n),{label:`Password`,prop:`password`,error:V.password},{default:f(()=>[S(h(r),{modelValue:B.password,"onUpdate:modelValue":a[1]||=e=>B.password=e,type:`password`,placeholder:`••••••••`,size:`large`,autocomplete:`current-password`,"show-password":``,disabled:h(F)},null,8,[`modelValue`,`disabled`])]),_:1},8,[`error`]),S(h(A),{type:`primary`,size:`large`,class:`w-full mt-2`,loading:h(F),disabled:h(F),"native-type":`submit`},{default:f(()=>a[2]||=[x(` Sign in `,-1)]),_:1,__:[2]},8,[`loading`,`disabled`])]),_:1},8,[`model`]),_(`p`,P,[a[4]||=x(` Don't have an account? `,-1),S(o,{to:`/register`,class:`text-blue-600 font-medium`},{default:f(()=>a[3]||=[x(`Create one`,-1)]),_:1,__:[3]})])])])}}}),I=O(F,[[`__scopeId`,`data-v-89d4a46e`]]);export{I as default};