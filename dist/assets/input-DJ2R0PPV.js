import{$ as e,B as t,C as n,E as r,L as i,Q as a,S as o,T as s,V as c,W as l,X as u,a2 as d,a3 as f,aC as ee,aF as te,aJ as ne,ao as re,b$ as ie,b8 as ae,b9 as p,bA as oe,bB as se,bC as m,bE as h,bL as g,bO as _,bP as ce,bS as v,bT as le,bW as ue,bX as de,bY as y,bZ as b,ba as x,bb as S,bc as C,bd as w,be as T,bh as fe,bi as E,bj as D,bo as pe,bp as O,br as me,bt as k,bw as A,bz as j,c0 as M,k as he,m as ge,n as _e,o as ve,p as ye,t as N,u as P,x as be,y as F}from"./index-BCk1CcfA.js";const I=`update:modelValue`,xe=`change`,Se=`input`,L=()=>u&&/firefox/i.test(window.navigator.userAgent);let R;const z={height:`0`,visibility:`hidden`,overflow:L()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},B=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`];function V(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`)),a=B.map(e=>[e,t.getPropertyValue(e)]);return{contextStyle:a,paddingSize:r,borderSize:i,boxSizing:n}}function Ce(t,n=1,r){var i;R||(R=document.createElement(`textarea`),document.body.appendChild(R));let{paddingSize:a,borderSize:o,boxSizing:s,contextStyle:c}=V(t);c.forEach(([e,t])=>R?.style.setProperty(e,t)),Object.entries(z).forEach(([e,t])=>R?.style.setProperty(e,t,`important`)),R.value=t.value||t.placeholder||``;let l=R.scrollHeight,u={};s===`border-box`?l+=o:s===`content-box`&&(l-=a),R.value=``;let d=R.scrollHeight-a;if(e(n)){let e=d*n;s===`border-box`&&(e=e+a+o),l=Math.max(e,l),u.minHeight=`${e}px`}if(e(r)){let e=d*r;s===`border-box`&&(e=e+a+o),l=Math.min(e,l)}return u.height=`${l}px`,(i=R.parentNode)==null||i.removeChild(R),R=void 0,u}const H=o({id:{type:String,default:void 0},size:a,disabled:Boolean,modelValue:{type:s([String,Number,Object]),default:``},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:s([Boolean,Object]),default:!1},autocomplete:{type:String,default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:F},prefixIcon:{type:F},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:s([Object,Array,String]),default:()=>P({})},autofocus:Boolean,rows:{type:Number,default:2},...N([`ariaLabel`]),inputmode:{type:s(String),default:void 0},name:String}),U={[I]:e=>y(e),input:e=>y(e),change:e=>y(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},we=[`class`,`style`],W=/^on[A-Z]/,Te=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=x(()=>(n?.value||[]).concat(we)),i=D();return x(i?()=>{var e;return f(Object.entries((e=i.proxy)?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&W.test(e))))}:()=>({}))};function Ee(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let o=D(),{emit:s}=o,l=_(),u=g(!1),d=e=>{let i=ue(n)?n(e):!1;v(t)||u.value||i||(u.value=!0,s(`focus`,e),r?.())},f=e=>{var n;let r=ue(i)?i(e):!1;v(t)||e.relatedTarget&&(n=l.value)?.contains(e.relatedTarget)||r||(u.value=!1,s(`blur`,e),a?.())},ee=n=>{var r,i;v(t)||he(n.target)||(r=l.value)?.contains(document.activeElement)&&l.value!==document.activeElement||(i=e.value)==null||i.focus()};return m([l,()=>v(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),c(l,`focus`,d,!0),c(l,`blur`,f,!0),c(l,`click`,ee,!0),{isFocused:u,wrapperRef:l,handleFocus:d,handleBlur:f}}const De=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Oe({afterComposition:e,emit:t}){let n=g(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{var r;t?.(`compositionupdate`,e);let i=(r=e.target)?.value,a=i[i.length-1]||``;n.value=!De(a)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,O(()=>e(r)))},o=e=>{e.type===`compositionend`?a(e):i(e)};return{isComposing:n,handleComposition:o,handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function ke(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;if(n==null||r==null)return;let a=i.slice(0,Math.max(0,n)),o=i.slice(Math.max(0,r));t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:a,afterTxt:o}}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}const Ae=`ElInput`,G=E({name:Ae,inheritAttrs:!1}),K=E({...G,props:H,emits:U,setup(e,{expose:n,emit:i}){let a=e,o=oe(),s=Te(),c=se(),f=x(()=>[a.type===`textarea`?F.b():P.b(),P.m(he.value),P.is(`disabled`,N.value),P.is(`exceed`,Ie.value),{[P.b(`group`)]:c.prepend||c.append,[P.m(`prefix`)]:c.prefix||a.prefixIcon,[P.m(`suffix`)]:c.suffix||a.suffixIcon||a.clearable||a.showPassword,[P.bm(`suffix`,`password-clear`)]:J.value&&Fe.value,[P.b(`hidden`)]:a.type===`hidden`},o.class]),ue=x(()=>[P.e(`wrapper`),P.is(`focus`,W.value)]),{form:y,formItem:E}=ve(),{inputId:D}=ye(a,{formItemContext:E}),he=_e(),N=ge(),P=re(`input`),F=re(`textarea`),L=_(),R=_(),z=g(!1),B=g(!1),V=g(),H=_(a.inputStyle),U=x(()=>L.value||R.value),{wrapperRef:we,isFocused:W,handleFocus:De,handleBlur:Ae}=Ee(U,{disabled:N,afterBlur(){var e;a.validateEvent&&((e=E?.validate)==null||e.call(E,`blur`).catch(e=>r()))}}),G=x(()=>{var e;return(e=y?.statusIcon)??!1}),K=x(()=>E?.validateState||``),je=x(()=>K.value&&be[K.value]),Me=x(()=>B.value?ne:te),Ne=x(()=>[o.style]),Pe=x(()=>[a.inputStyle,H.value,{resize:a.resize}]),q=x(()=>d(a.modelValue)?``:String(a.modelValue)),J=x(()=>a.clearable&&!N.value&&!a.readonly&&!!q.value&&(W.value||z.value)),Fe=x(()=>a.showPassword&&!N.value&&!!q.value),Y=x(()=>a.showWordLimit&&!!a.maxlength&&(a.type===`text`||a.type===`textarea`)&&!N.value&&!a.readonly&&!a.showPassword),X=x(()=>q.value.length),Ie=x(()=>!!Y.value&&X.value>Number(a.maxlength)),Le=x(()=>!!c.suffix||!!a.suffixIcon||J.value||a.showPassword||Y.value||!!K.value&&G.value),[Re,ze]=ke(L);l(R,e=>{if(Ve(),!Y.value||a.resize!==`both`)return;let t=e[0],{width:n}=t.contentRect;V.value={right:`calc(100% - ${n+15+6}px)`}});let Z=()=>{let{type:e,autosize:t}=a;if(!(!u||e!==`textarea`||!R.value))if(t){let e=de(t)?t.minRows:void 0,n=de(t)?t.maxRows:void 0,r=Ce(R.value,e,n);H.value={overflowY:`hidden`,...r},O(()=>{R.value.offsetHeight,H.value=r})}else H.value={minHeight:Ce(R.value).minHeight}},Be=e=>{let t=!1;return()=>{var n;if(t||!a.autosize)return;let r=(n=R.value)?.offsetParent===null;r||(e(),t=!0)}},Ve=Be(Z),Q=()=>{let e=U.value,t=a.formatter?a.formatter(q.value):q.value;!e||e.value===t||(e.value=t)},$=async e=>{Re();let{value:t}=e.target;if(a.formatter&&a.parser&&(t=a.parser(t)),!Ue.value){if(t===q.value){Q();return}i(I,t),i(Se,t),await O(),Q(),ze()}},He=e=>{let{value:t}=e.target;a.formatter&&a.parser&&(t=a.parser(t)),i(xe,t)},{isComposing:Ue,handleCompositionStart:We,handleCompositionUpdate:Ge,handleCompositionEnd:Ke}=Oe({emit:i,afterComposition:$}),qe=()=>{Re(),B.value=!B.value,setTimeout(ze)},Je=()=>{var e;return(e=U.value)?.focus()},Ye=()=>{var e;return(e=U.value)?.blur()},Xe=e=>{z.value=!1,i(`mouseleave`,e)},Ze=e=>{z.value=!0,i(`mouseenter`,e)},Qe=e=>{i(`keydown`,e)},$e=()=>{var e;(e=U.value)==null||e.select()},et=()=>{i(I,``),i(xe,``),i(`clear`),i(Se,``)};return m(()=>a.modelValue,()=>{var e;O(()=>Z()),a.validateEvent&&((e=E?.validate)==null||e.call(E,`change`).catch(e=>r()))}),m(q,()=>Q()),m(()=>a.type,async()=>{await O(),Q(),Z()}),me(()=>{!a.formatter&&a.parser,Q(),O(Z)}),n({input:L,textarea:R,ref:U,textareaStyle:Pe,autosize:ce(a,`autosize`),isComposing:Ue,focus:Je,blur:Ye,select:$e,clear:et,resizeTextarea:Z}),(e,n)=>(k(),T(`div`,{class:b([v(f),{[v(P).bm(`group`,`append`)]:e.$slots.append,[v(P).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:ie(v(Ne)),onMouseenter:Ze,onMouseleave:Xe},[w(` input `),e.type===`textarea`?(k(),T(p,{key:1},[w(` textarea `),S(`textarea`,pe({id:v(D),ref_key:`textarea`,ref:R,class:[v(F).e(`inner`),v(P).is(`focus`,v(W))]},v(s),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:v(N),readonly:e.readonly,autocomplete:e.autocomplete,style:v(Pe),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:v(We),onCompositionupdate:v(Ge),onCompositionend:v(Ke),onInput:$,onFocus:v(De),onBlur:v(Ae),onChange:He,onKeydown:Qe}),null,16,[`id`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`,`onFocus`,`onBlur`]),v(Y)?(k(),T(`span`,{key:0,style:ie(V.value),class:b(v(P).e(`count`))},M(v(X))+` / `+M(e.maxlength),7)):w(`v-if`,!0)],64)):(k(),T(p,{key:0},[w(` prepend slot `),e.$slots.prepend?(k(),T(`div`,{key:0,class:b(v(P).be(`group`,`prepend`))},[A(e.$slots,`prepend`)],2)):w(`v-if`,!0),S(`div`,{ref_key:`wrapperRef`,ref:we,class:b(v(ue))},[w(` prefix slot `),e.$slots.prefix||e.prefixIcon?(k(),T(`span`,{key:0,class:b(v(P).e(`prefix`))},[S(`span`,{class:b(v(P).e(`prefix-inner`))},[A(e.$slots,`prefix`),e.prefixIcon?(k(),C(v(t),{key:0,class:b(v(P).e(`icon`))},{default:h(()=>[(k(),C(j(e.prefixIcon)))]),_:1},8,[`class`])):w(`v-if`,!0)],2)],2)):w(`v-if`,!0),S(`input`,pe({id:v(D),ref_key:`input`,ref:L,class:v(P).e(`inner`)},v(s),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?B.value?`text`:`password`:e.type,disabled:v(N),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:v(We),onCompositionupdate:v(Ge),onCompositionend:v(Ke),onInput:$,onChange:He,onKeydown:Qe}),null,16,[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`]),w(` suffix slot `),v(Le)?(k(),T(`span`,{key:1,class:b(v(P).e(`suffix`))},[S(`span`,{class:b(v(P).e(`suffix-inner`))},[!v(J)||!v(Fe)||!v(Y)?(k(),T(p,{key:0},[A(e.$slots,`suffix`),e.suffixIcon?(k(),C(v(t),{key:0,class:b(v(P).e(`icon`))},{default:h(()=>[(k(),C(j(e.suffixIcon)))]),_:1},8,[`class`])):w(`v-if`,!0)],64)):w(`v-if`,!0),v(J)?(k(),C(v(t),{key:1,class:b([v(P).e(`icon`),v(P).e(`clear`)]),onMousedown:ae(v(le),[`prevent`]),onClick:et},{default:h(()=>[fe(v(ee))]),_:1},8,[`class`,`onMousedown`])):w(`v-if`,!0),v(Fe)?(k(),C(v(t),{key:2,class:b([v(P).e(`icon`),v(P).e(`password`)]),onClick:qe},{default:h(()=>[(k(),C(j(v(Me))))]),_:1},8,[`class`])):w(`v-if`,!0),v(Y)?(k(),T(`span`,{key:3,class:b(v(P).e(`count`))},[S(`span`,{class:b(v(P).e(`count-inner`))},M(v(X))+` / `+M(e.maxlength),3)],2)):w(`v-if`,!0),v(K)&&v(je)&&v(G)?(k(),C(v(t),{key:4,class:b([v(P).e(`icon`),v(P).e(`validateIcon`),v(P).is(`loading`,v(K)===`validating`)])},{default:h(()=>[(k(),C(j(v(je))))]),_:1},8,[`class`])):w(`v-if`,!0)],2)],2)):w(`v-if`,!0)],2),w(` append slot `),e.$slots.append?(k(),T(`div`,{key:1,class:b(v(P).be(`group`,`append`))},[A(e.$slots,`append`)],2)):w(`v-if`,!0)],64))],38))}});var je=i(K,[[`__file`,`input.vue`]]);const Me=n(je);export{Me as b};