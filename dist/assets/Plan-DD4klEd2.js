import{b as e}from"./css-Kk413bhP.js";import{b as t}from"./css-2CXRkt3e.js";import{B as n,C as r,L as i,S as a,aA as o,aB as s,aD as c,aG as l,aH as u,aK as d,ao as f,ap as p,aq as m,az as h,b9 as g,bE as _,bL as v,bS as y,bZ as b,ba as x,bb as S,bc as C,bd as w,be as T,bf as E,bg as D,bh as O,bi as k,br as A,bt as j,bw as M,bz as N,c0 as P,e as F,g as I}from"./index-BCk1CcfA.js";import"./css-zdK3R9k8.js";const L={primary:`icon-primary`,success:`icon-success`,warning:`icon-warning`,error:`icon-error`,info:`icon-info`},R={[L.primary]:l,[L.success]:s,[L.warning]:d,[L.error]:c,[L.info]:l},z=a({title:{type:String,default:``},subTitle:{type:String,default:``},icon:{type:String,values:[`primary`,`success`,`warning`,`info`,`error`],default:`info`}}),B=k({name:`ElResult`}),V=k({...B,props:z,setup(e){let t=e,n=f(`result`),r=x(()=>{let e=t.icon,n=e&&L[e]?L[e]:`icon-info`,r=R[n]||R[`icon-info`];return{class:n,component:r}});return(e,t)=>(j(),T(`div`,{class:b(y(n).b())},[S(`div`,{class:b(y(n).e(`icon`))},[M(e.$slots,`icon`,{},()=>[y(r).component?(j(),C(N(y(r).component),{key:0,class:b(y(r).class)},null,8,[`class`])):w(`v-if`,!0)])],2),e.title||e.$slots.title?(j(),T(`div`,{key:0,class:b(y(n).e(`title`))},[M(e.$slots,`title`,{},()=>[S(`p`,null,P(e.title),1)])],2)):w(`v-if`,!0),e.subTitle||e.$slots[`sub-title`]?(j(),T(`div`,{key:1,class:b(y(n).e(`subtitle`))},[M(e.$slots,`sub-title`,{},()=>[S(`p`,null,P(e.subTitle),1)])],2)):w(`v-if`,!0),e.$slots.extra?(j(),T(`div`,{key:2,class:b(y(n).e(`extra`))},[M(e.$slots,`extra`)],2)):w(`v-if`,!0)],2))}});var H=i(V,[[`__file`,`result.vue`]]);const U=r(H),W={class:`min-h-screen bg-slate-950 text-slate-50 flex flex-col items-center justify-center px-4 py-12`},G={class:`w-full max-w-3xl rounded-3xl bg-slate-900/80 border border-slate-800 shadow-2xl backdrop-blur`},K={class:`px-6 py-8 sm:px-10`},q={key:0,class:`space-y-4`},J={key:1,class:`rounded-2xl border border-slate-800 bg-slate-900/60 px-6 py-6 sm:px-10 flex flex-col gap-6`},Y={class:`flex flex-col gap-3 text-left`},X={class:`mt-3 space-y-2 text-sm text-slate-300`},Z={class:`flex items-start gap-2`},Q={class:`flex items-start gap-2`},$={class:`flex items-start gap-2`},ee={class:`rounded-2xl border border-slate-800 bg-slate-900/80 px-5 py-4 text-sm text-slate-300`},te={class:`flex items-center justify-between gap-3`},ne={class:`font-semibold text-slate-100`},re={key:0,class:`mt-2 flex items-center justify-between gap-3 text-xs text-slate-400`},ie={class:`flex flex-col gap-3`};var ae=k({__name:`Plan`,setup(r){let i=p(),a=h(),s=v(!0),c=v(!1),l=v(``),d=v(``),f=x(()=>i.user?.plan_required??!1),b=x(()=>i.user?.plan?i.user.plan:f.value?`Not activated`:`—`),k=x(()=>{if(!i.user?.plan_cycle_start||!i.user?.plan_cycle_end)return``;let e=new Date(i.user.plan_cycle_start),t=new Date(i.user.plan_cycle_end);return`${e.toLocaleDateString()} → ${t.toLocaleDateString()}`});function M(e,t={}){console.info(`[analytics][free-plan]`,e,t)}async function N(){try{if(d.value=``,await i.fetchSelf(),!f.value){M(`redirect_existing_plan`,{plan:i.user?.plan}),a.replace({name:`ask-ai`});return}}catch(e){d.value=`We had trouble loading your account. Please refresh the page.`,M(`profile_load_error`,{err:e})}finally{s.value=!1}}async function L(){if(!c.value){l.value=``,c.value=!0,M(`cta_click`);try{let e=await m();M(`activation_success`,{plan:e.plan,cycle_start:e.plan_cycle_start,cycle_end:e.plan_cycle_end}),await i.fetchSelf();let t=i.user?.plan_cycle_start&&i.user?.plan_cycle_end?`${new Date(i.user.plan_cycle_start).toLocaleDateString()} → ${new Date(i.user.plan_cycle_end).toLocaleDateString()}`:void 0;F.success(t?`Free plan activated! Current cycle: ${t}`:`Free plan activated!`),a.replace({name:`ask-ai`})}catch(e){let t=`Unable to activate the free plan right now. Please try again.`,n=e;n.response?.status===400&&(t=n.response.data?.detail||t),l.value=t,M(`activation_error`,{detail:t,status:n.response?.status})}finally{c.value=!1}}}return A(()=>{M(`view`),N()}),(r,i)=>(j(),T(`div`,W,[S(`div`,G,[S(`div`,K,[i[8]||=E(`<header class="mb-8 flex flex-col gap-3 text-center"><div class="mx-auto h-12 w-12 rounded-2xl bg-gradient-to-r from-indigo-500 to-blue-500 flex items-center justify-center text-white font-semibold"> PPR </div><div><p class="text-xs uppercase tracking-[0.35em] text-indigo-300/80">PastPaperRank</p><h1 class="mt-2 text-2xl sm:text-3xl font-semibold text-slate-50"> Unlock Retrieval Access </h1><p class="mt-2 text-sm text-slate-400"> Activate the complimentary plan to start using the retrieval workspace immediately. </p></div></header>`,1),s.value?(j(),T(`div`,q,[O(y(t),{animated:``,rows:4}),O(y(t),{animated:``,rows:2})])):(j(),T(g,{key:1},[d.value?(j(),C(y(e),{key:0,type:`error`,closable:!1,class:`mb-4`,"show-icon":``},{default:_(()=>[D(P(d.value),1)]),_:1})):w(``,!0),f.value?(j(),T(`section`,J,[S(`div`,Y,[i[3]||=S(`h2`,{class:`text-xl font-semibold text-slate-50`},`Your workspace is paused`,-1),i[4]||=S(`p`,{class:`text-sm text-slate-400`},` Activate our free starter plan to receive credits for retrieval queries, mark schemes, and topical recommendations. `,-1),S(`ul`,X,[S(`li`,Z,[O(y(n),{class:`mt-0.5 text-emerald-400`,size:`16`},{default:_(()=>[O(y(o))]),_:1}),i[0]||=S(`span`,null,`Immediate access to the retrieval dashboard`,-1)]),S(`li`,Q,[O(y(n),{class:`mt-0.5 text-emerald-400`,size:`16`},{default:_(()=>[O(y(o))]),_:1}),i[1]||=S(`span`,null,`Complimentary credit bundle refreshed every billing cycle`,-1)]),S(`li`,$,[O(y(n),{class:`mt-0.5 text-emerald-400`,size:`16`},{default:_(()=>[O(y(o))]),_:1}),i[2]||=S(`span`,null,`Upgrade any time for higher limits and collaborative workspaces`,-1)])])]),S(`div`,ee,[S(`div`,te,[i[5]||=S(`span`,null,`Current plan`,-1),S(`span`,ne,P(b.value),1)]),k.value?(j(),T(`div`,re,[i[6]||=S(`span`,null,`Current cycle`,-1),S(`span`,null,P(k.value),1)])):w(``,!0)]),S(`div`,ie,[l.value?(j(),C(y(e),{key:0,type:`error`,closable:!1,class:`border border-rose-400/40 bg-rose-500/10 text-rose-100`,"show-icon":``},{default:_(()=>[D(P(l.value),1)]),_:1})):w(``,!0),O(y(I),{type:`primary`,size:`large`,loading:c.value,disabled:c.value,onClick:L,class:`!h-12 !text-base !font-semibold`},{icon:_(()=>[c.value?(j(),C(y(n),{key:0},{default:_(()=>[O(y(u),{class:`animate-spin`})]),_:1})):w(``,!0)]),default:_(()=>[S(`span`,null,P(c.value?`Activating…`:`Get Free Plan`),1)]),_:1},8,[`loading`,`disabled`]),i[7]||=S(`p`,{class:`text-xs text-slate-500 text-center`},` No payment details required. You can upgrade or cancel anytime. `,-1)])])):(j(),C(y(U),{key:2,icon:`success`,title:`Plan already active`,"sub-title":`Redirecting you to the retrieval dashboard…`,class:`bg-slate-900/60 rounded-2xl border border-slate-800`},{icon:_(()=>[O(y(n),{class:`text-emerald-400`,size:`48`},{default:_(()=>[O(y(o))]),_:1})]),_:1}))],64))])])]))}}),oe=ae;export{oe as default};